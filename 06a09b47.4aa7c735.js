(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{55:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return c})),r.d(t,"metadata",(function(){return s})),r.d(t,"rightToc",(function(){return l})),r.d(t,"default",(function(){return d}));var n=r(2),a=r(6),i=(r(0),r(88)),o=r(92),c={id:"directory-search-extension",title:"Directory Search Extension"},s={unversionedId:"directory-search-extension",id:"directory-search-extension",isDocsHomePage:!1,title:"Directory Search Extension",description:"Add the Extension",source:"@site/docs/directory-search-extension.md",permalink:"/verse-developer/docs/directory-search-extension",sidebar:"tutorials_examples",previous:{title:"Third Party File Repository",permalink:"/verse-developer/docs/third-party-file-repository"},next:{title:"CSS Extension",permalink:"/verse-developer/docs/css-extension"}},l=[{value:"Add the Extension",id:"add-the-extension",children:[]},{value:"Test it Out",id:"test-it-out",children:[]},{value:"How it Works",id:"how-it-works",children:[]}],b={rightToc:l};function d(e){var t=e.components,r=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(n.a)({},b,r,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"add-the-extension"},"Add the Extension"),Object(i.b)("p",null,"This example demonstrates how to use the ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("a",Object(n.a)({parentName:"strong"},{href:"./extension-points#directory-search"}),"Directory Search"))," extension to add new users to your default HCL Verse search directory."),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),'[\n  {\n    "name": "Directory Search Sample",\n    "title": "Directory Search Sample",\n    "description": "This is a sample of directory search extension",\n    "extensions": [\n      {\n        "type": "com.ibm.verse.ext.directorySearch",\n        "payload": {\n          "url": "${extensionPath}/custom-directory-search/index.html",\n          "enableBuiltinDirectorySearch": true\n        }\n      }\n    ],\n    "services": ["Verse"]\n  }\n]\n')),Object(i.b)("h4",{id:"extension-properties"},"Extension Properties"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Property"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:"center"}),"Type"),Object(i.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Definition"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"type"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"center"}),Object(i.b)("inlineCode",{parentName:"td"},"string")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"the extension point  (",Object(i.b)("a",Object(n.a)({parentName:"td"},{href:"./extension-points"}),"List of Extension Points"),")")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"payload"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"center"}),Object(i.b)("inlineCode",{parentName:"td"},"object")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"JSON object that specifies properties specific to the extension")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"url"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"center"}),Object(i.b)("inlineCode",{parentName:"td"},"string")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The fully-qualified URL of where your application is being served from")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"enableBuiltinDirectorySearch"),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:"center"}),Object(i.b)("inlineCode",{parentName:"td"},"Boolean")),Object(i.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"controls whether the built-in directory search in Verse is also used")))),Object(i.b)("h2",{id:"test-it-out"},"Test it Out"),Object(i.b)(o.a,{path:"samples/custom-search-directory.gif",mdxType:"Expandable"}),Object(i.b)("h2",{id:"how-it-works"},"How it Works"),Object(i.b)("p",null,"The Directory Search extension allows you to customize the results of Verse's built-in search directory. In this application, the search ",Object(i.b)("strong",{parentName:"p"},"sample hcl")," returns some custom results from the sample web application via cross-document messaging. Selecting ",Object(i.b)("strong",{parentName:"p"},"Search Directory")," intiates a ping from Verse to the custom web application which, in return, sends a message that informs Verse it is ready to receive information. Verse will then send another message to the web application with the search string. As always, it is good practice to verify the ",Object(i.b)("inlineCode",{parentName:"p"},"verseApiData.actionId"),", in this case it is ",Object(i.b)("inlineCode",{parentName:"p"},"com.ibm.verse.ext.action.directorySearch"),"."),Object(i.b)("p",null,"Once the handshake is complete, the sample web application is responsible for sending relevant search results back to Verse. For the purposes of this demo, there are six hard-coded sample results that are sent in a postMessage to Verse in the format:"),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"var searched_message = {\n  verseApiType: 'com.ibm.verse.ext.directorySearch.searchResults',\n  returnCode: 0,\n  result: searchResult,\n};\n")),Object(i.b)("p",null,"where ",Object(i.b)("inlineCode",{parentName:"p"},"searchResult")," is an array of objects with properties:"),Object(i.b)("pre",null,Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"emailAddress: // email address (test@hcl.com)\nnotesAddress: // Notes name (John Smith/UK/HCL)\ndisplayName: // Name to be displayed. Optional\nforwardMailAddress: // Forward mail address. Optional\n")),Object(i.b)("p",null,"Take a look inside the ",Object(i.b)("inlineCode",{parentName:"p"},"script.js")," file in the ",Object(i.b)("inlineCode",{parentName:"p"},"custom-directory-search")," folder to get a better understanding of how the sample web application sends and receives data. Additionally, reference the ",Object(i.b)("strong",{parentName:"p"},Object(i.b)("a",Object(n.a)({parentName:"strong"},{href:"./extension-points#directory-search"}),"Directory Search"))," extension documentation for more information."))}d.isMDXComponent=!0},88:function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return m}));var n=r(0),a=r.n(n);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=a.a.createContext({}),b=function(e){var t=a.a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):c(c({},t),e)),r},d=function(e){var t=b(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},u=a.a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,o=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=b(r),u=n,m=d["".concat(o,".").concat(u)]||d[u]||p[u]||i;return r?a.a.createElement(m,c(c({ref:t},l),{},{components:r})):a.a.createElement(m,c({ref:t},l))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,o=new Array(i);o[0]=u;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:n,o[1]=c;for(var l=2;l<i;l++)o[l]=r[l];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,r)}u.displayName="MDXCreateElement"},89:function(e,t,r){"use strict";var n=r(0),a=r(20);t.a=function(){var e=Object(n.useContext)(a.a);if(null===e)throw new Error("Docusaurus context not provided");return e}},90:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return o}));var n=r(89),a=r(91);function i(){var e=Object(n.a)().siteConfig,t=(e=void 0===e?{}:e).baseUrl,r=void 0===t?"/":t,i=e.url;return{withBaseUrl:function(e,t){return function(e,t,r,n){var i=void 0===n?{}:n,o=i.forcePrependBaseUrl,c=void 0!==o&&o,s=i.absolute,l=void 0!==s&&s;if(!r)return r;if(r.startsWith("#"))return r;if(Object(a.b)(r))return r;if(c)return t+r;var b=!r.startsWith(t)?t+r.replace(/^\//,""):r;return l?e+b:b}(i,r,e,t)}}}function o(e,t){return void 0===t&&(t={}),(0,i().withBaseUrl)(e,t)}},91:function(e,t,r){"use strict";function n(e){return!0===/^(\w*:|\/\/)/.test(e)}function a(e){return void 0!==e&&!n(e)}r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return a}))},92:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(0),a=r.n(n),i=(r(47),r(90)),o=function(e){var t=e.path,r=a.a.useState(!1),n=r[0],o=r[1],c=a.a.useState({}),s=c[0],l=c[1],b=a.a.useRef(null),d=function(e){e.preventDefault(),o(!n)},p=function(e){n&&(e.preventDefault(),o(!1))};return a.a.useEffect((function(){return document.body.addEventListener("keydown",p),function(){document.body.removeEventListener("keydown",p)}}),[]),a.a.useEffect((function(){var e=document.getElementsByClassName("navbar")[0];n&&b.current?(document.body.setAttribute("style","overflow:hidden;"),l({top:e.offsetTop})):(document.body.removeAttribute("style"),b.current.focus(),l({}))}),[n]),a.a.createElement("div",{onKeyPress:d,onClick:d,className:n?"expandable-container expanded":"expandable-container",ref:b,style:s},a.a.createElement("img",{tabIndex:"0",className:n?"image image-expanded":"image",src:Object(i.a)(t)}))}}}]);